# VM-1: Kafka Setup Instructions

## Deployment Commands

```bash
# Connect to VM-1
ssh -i plant-monitoring-key.pem ubuntu@10.0.143.200

# Create application directory
sudo mkdir -p /opt/kafka
cd /opt/kafka

# Copy docker-compose.yml to this directory
sudo nano docker-compose.yml
# Paste the contents from docker-compose.yml

# Start Kafka
sudo docker compose up -d

# Verify Kafka is running
sudo docker compose ps
sudo docker compose logs kafka

# Create required topics
sudo docker exec kafka kafka-topics.sh --bootstrap-server localhost:9092 --create --topic plant-sensors --partitions 1 --replication-factor 1
sudo docker exec kafka kafka-topics.sh --bootstrap-server localhost:9092 --create --topic plant-alerts --partitions 1 --replication-factor 1

# Verify topics created
sudo docker exec kafka kafka-topics.sh --bootstrap-server localhost:9092 --list
```

## Key Features

- **KRaft Mode**: No ZooKeeper dependency
- **Memory Optimized**: 400MB heap size for t2.micro
- **Health Checks**: Automatic service monitoring
- **Auto-restart**: Service restarts on failure
- **Network**: Accessible at 10.0.143.200:9092

## Topics Created

- `plant-sensors`: IoT sensor data from plant sensors
- `plant-alerts`: Health alerts generated by processor
