# VM-2: MongoDB Setup Instructions

## Deployment Commands

```bash
# Connect to VM-2
ssh -i plant-monitoring-key.pem ubuntu@10.0.135.192

# Create application directory
sudo mkdir -p /opt/mongodb
cd /opt/mongodb

# Copy docker-compose.yml to this directory
sudo nano docker-compose.yml
# Paste the contents from docker-compose.yml

# Start MongoDB
sudo docker compose up -d

# Verify MongoDB is running
sudo docker compose ps
sudo docker compose logs mongodb

# Initialize database with sample data
sudo docker compose exec mongodb mongosh --file /tmp/init-db.js

# Alternative: Manual initialization
sudo docker compose exec mongodb mongosh
# Then run the commands from init-db.js manually
```

## Database Configuration

- **Admin User**: admin / AdminPass123!
- **Application User**: plantuser / PlantUserPass123!
- **Database**: plant_monitoring
- **Network**: Accessible at 10.0.135.192:27017

## Collections Created

- `plants`: Plant profiles and care instructions
- `sensor_readings`: Raw sensor data from IoT devices
- `alerts`: Health alerts generated by processor
- `care_events`: Plant care history tracking

## Memory Optimization

- **WiredTiger Cache**: Limited to 256MB for t2.micro
- **Container Memory**: Limited to 400MB
- **Quiet Mode**: Reduced logging for resource conservation
